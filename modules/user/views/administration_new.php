    
    <!-- Wrapper -->
	<div class="hk-wrapper" data-layout="vertical"  data-menu="light" data-footer="simple" data-hover="active">
		<!-- Main Content -->
		<div class="hk-pg-wrapper pb-0">
			<!-- Page Body -->
			<div class="hk-pg-body py-0">
				<div class="contactapp-wrap contactapp-sidebar-toggle">
					
					<div class="contactapp-content">
						<div class="contactapp-detail-wrap">
							<header class="contact-header">
								<div class="d-flex align-items-center">
									<div class="dropdown">
										<a class="contactapp-title dropdown-toggle link-dark" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
											<h1>Contacts</h1>
										</a>
										<div class="dropdown-menu">
											<a class="dropdown-item" href="#"><span class="feather-icon dropdown-icon"><i data-feather="users"></i></span><span>All Contacts</span></a>
											<a class="dropdown-item" href="#"><span class="feather-icon dropdown-icon"><i data-feather="star"></i></span><span>Important</span></a>
											<a class="dropdown-item" href="#"><span class="feather-icon dropdown-icon"><i data-feather="archive"></i></span><span>Archive</span></a>
											<a class="dropdown-item" href="#"><span class="feather-icon dropdown-icon"><i data-feather="edit"></i></span><span>Pending</span></a>
											<a class="dropdown-item" href="#"><span class="feather-icon dropdown-icon"><i data-feather="trash-2"></i></span><span>Deleted</span></a>
										</div>
										
									</div>
									<button type="button" class="btn btn-primary btn-rounded btn-block m-1" data-bs-toggle="modal" data-bs-target="#add_new_contact">
									Add new contact
								</button>
								</div>
								<div class="contact-options-wrap">	
									<a class="btn btn-icon btn-flush-dark flush-soft-hover dropdown-toggle no-caret active" href="#" data-bs-toggle="dropdown"><span class="icon"><span class="feather-icon"><i data-feather="list"></i></span></span></a>
									<div class="dropdown-menu dropdown-menu-end">
										<a class="dropdown-item active" href="contact.html"><span class="feather-icon dropdown-icon"><i data-feather="list"></i></span><span>List View</span></a>
										<a class="dropdown-item" href="contact-cards.html"><span class="feather-icon dropdown-icon"><i data-feather="grid"></i></span><span>Grid View</span></a>
										<a class="dropdown-item" href="#"><span class="feather-icon dropdown-icon"><i data-feather="server"></i></span><span>Compact View</span></a>
									</div>
									<a class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover no-caret d-sm-inline-block d-none" href="#" data-bs-toggle="tooltip" data-placement="top" title="" data-bs-original-title="Refresh"><span class="icon"><span class="feather-icon"><i data-feather="refresh-cw"></i></span></span></a>
									<div class="v-separator d-lg-block d-none"></div>
									<a class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover dropdown-toggle no-caret  d-lg-inline-block d-none  ms-sm-0" href="#" data-bs-toggle="dropdown"><span class="icon" data-bs-toggle="tooltip" data-placement="top" title="" data-bs-original-title="Manage Contact"><span class="feather-icon"><i data-feather="settings"></i></span></span></a>
									<div class="dropdown-menu dropdown-menu-end">
										<a class="dropdown-item" href="#">Manage Contact</a>
										<a class="dropdown-item" href="#">Import</a>
										<a class="dropdown-item" href="#">Export</a>
										<div class="dropdown-divider"></div>
										<a class="dropdown-item" href="#">Send Messages</a>
										<a class="dropdown-item" href="#">Delegate Access</a>
									</div>
									<a class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover dropdown-toggle no-caret d-lg-inline-block d-none" href="#" data-bs-toggle="dropdown"><span class="icon" data-bs-toggle="tooltip" data-placement="top" title="" data-bs-original-title="More"><span class="feather-icon"><i data-feather="more-vertical"></i></span></span></a>
									<div class="dropdown-menu dropdown-menu-end">
										<a class="dropdown-item" href="profile.html"><span class="feather-icon dropdown-icon"><i data-feather="star"></i></span><span>Stared Contacts</span></a>
										<a class="dropdown-item" href="#"><span class="feather-icon dropdown-icon"><i data-feather="archive"></i></span><span>Archive Contacts</span></a>
										<div class="dropdown-divider"></div>
										<a class="dropdown-item" href="email.html"><span class="feather-icon dropdown-icon"><i data-feather="slash"></i></span><span>Block Content</span></a>
										<a class="dropdown-item" href="email.html"><span class="feather-icon dropdown-icon"><i data-feather="external-link"></i></span><span>Feedback</span></a>
									</div>
									<a class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover hk-navbar-togglable d-sm-inline-block d-none" href="#" data-bs-toggle="tooltip" data-placement="top" title="" data-bs-original-title="Collapse">
										<span class="icon">
											<span class="feather-icon"><i data-feather="chevron-up"></i></span>
											<span class="feather-icon d-none"><i data-feather="chevron-down"></i></span>
										</span>
									</a>
								</div>
								<div class="hk-sidebar-togglable active"></div>
							</header>
							<div class="contact-body">
								<div data-simplebar class="nicescroll-bar">
									<div class="collapse" id="collapseQuick">
										<div class="quick-access-form-wrap">
											<form class="quick-access-form border">
												<div class="row gx-3">
													<div class="col-xxl-10">
														<div class="position-relative">
															<div class="dropify-square">
																<input type="file"  class="dropify-1"/>
															</div>
															<div class="col-md-12">
																<div class="row gx-3">
																	<div class="col-lg-4">
																		<div class="form-group">
																			<input class="form-control" placeholder="First name*" value="" type="text">
																		</div>
																		<div class="form-group">
																			<input class="form-control" placeholder="Last name*" value="" type="text">
																		</div>
																	</div>
																	<div class="col-lg-4">
																		<div class="form-group">
																			<input class="form-control" placeholder="Email Id*" value="" type="text">
																		</div>
																		<div class="form-group">
																			<input class="form-control" placeholder="Phone" value="" type="text">
																		</div>
																	</div>
																	<div class="col-lg-4">
																		<div class="form-group">
																			<input class="form-control"  placeholder="Department" value="" type="text">
																		</div>
																		<div class="form-group">
																			<select id="input_tags" class="form-control" multiple="multiple">
																				<option selected="selected">Collaborator</option>
																				<option>Designer</option>
																				<option selected="selected">Developer</option>
																			</select>
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
													<div class="col-xxl-2">
														<div class="form-group">
															<button data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false"  class="btn btn-block btn-primary ">Create New
															</button>
														</div>
														<div class="form-group">
															<button data-bs-toggle="collapse" disabled  data-bs-target="#collapseExample" aria-expanded="false"  class="btn btn-block btn-secondary">Discard
															</button>
														</div>
													</div>
												</div>
											</form>
										</div>
									</div>
									<div class="contact-list-view">
									<table id="datable_1" class="table nowrap w-100 mb-5">
											<thead>
												<tr>
													<th><span class="form-check mb-0">
														<input type="checkbox" class="form-check-input check-select-all" id="customCheck1">
														<label class="form-check-label" for="customCheck1"></label>
													</span></th>
													<th>Priest Name</th>
													<th>Role of Priest</th>
													<th>Level of Priest</th>
													<th>Action</th>
												</tr>
											</thead>
											<tbody>
                                            <?php  {?>
                                                <?php foreach ($administration as $key => $value) {  ?>  
                                                    <tr>
                                                        <td>
                                                            <!-- <div class="d-flex align-items-center">
                                                                <span class="contact-star marked"><span class="feather-icon"><i data-feather="star"></i></span></span>
                                                            </div> -->
                                                        </td>
                                                    
                                                        <td>
                                                            <div class="media align-items-center">
                                                                <div class="media-head me-2">
                                                                    <div class="avatar avatar-xs avatar-rounded">
                                                                    	<img src="<?=base_url('uploads/users/thumbs/' . imageCheck('users', getUserPhoto($value['userID']), 1)) ?>" class="avatar-img" alt="" />
                                                                    </div>
                                                                </div>
                                                                <div class="media-body">
                                                                    <span class="d-block text-high-em"><?php echo $value['full_name'] ?></span> 
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td><?php echo $value['a_role'] ?></td>
														
														<?php if($value['a_type'] == '1') { ?>
															<td>Bishop</td>
														<?php } elseif ($value['a_type'] == 2) {?>
															<td>Diocesan Service Team</td>
														<?php } else { ?>
															<td>College of Consulters</td>
														<?php } ?>
														
                                                        <td>
                                                            <div class="d-flex align-items-center">
                                                                <div class="d-flex">
                                                                    <a class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover" data-bs-toggle="tooltip" data-placement="top" title="" data-bs-original-title="Edit" href="edit-contact.html"><span class="icon"><span class="feather-icon"><i data-feather="edit"></i></span></span></a>
                                                                   
																	<a class="btn btn-icon btn-flush-dark btn-rounded flush-soft-hover del-button" onclick="deleteAdministrator('<?php echo $value['id'] ?>','<?php echo $value['userID'] ?>', '<?php echo $value['full_name'] ?>')" data-bs-toggle="tooltip" data-placement="top" title="" data-bs-original-title="Delete">
																		<span class="icon"><span class="feather-icon"><i data-feather="trash"></i></span></span>
																	</a>

                                                                </div>                                                                
                                                            </div>
                                                        </td>
                                                    </tr>
                                                <?php } ?>
                                            <?php } ?>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
						<!-- Edit Info -->
						<div id="add_new_contact" class="modal fade add-new-contact" tabindex="-1" role="dialog" aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
								<div class="modal-content">
									<div class="modal-body">
										<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">×</span>
										</button>
										<h5 class="mb-5">Create New Administrator</h5>
										<form>
											<div class="title title-xs title-wth-divider text-primary text-uppercase my-4"><span>Basic Info</span></div>
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <label class="form-label">Priest Name<span class="text-danger">*</span></label>
													<select class="form-select" id="priest_id" >
														<option value="">Select Priest</option>
														<?php foreach ($users as $key => $value) { ?>	
															<option value="<?php echo $value['userID']?>">
																<div class="avatar avatar-xs avatar-rounded">
																	<img src="<?=base_url('uploads/users/thumbs/' . imageCheck('users', getUserPhoto($value['userID']), 1)) ?>" class="avatar-img" alt="" />
																</div>
																<?php echo $value['full_name'] ?>
															</option>
														<?php }?>
													</select>    
													<span class="text-danger" id="name_validator"></span>
                                                </div>
                                            </div>	
                                            
                                            <div class="row gx-3">											
											    <div class="col-sm-6">
													<div class="form-group">
														<label class="form-label">Role<span class="text-danger">*</span></label>
														<input id="priest_role"  class="form-control" type="text"/>
														<span  class="text-danger" id="role_validator"></span>
													</div>
												</div>   
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="form-label">Priest Level<span class="text-danger">*</span></label>
                                                        <select class="form-select" id="priest_type" >
                                                            <option value="" >Select Level</option>
                                                            <option value="1">Bishop</option>
                                                            <option value="2">Diocesan Service Team</option>
                                                            <option value="3">College of Consulters</option>
                                                        </select>                                                        
														<span  class="text-danger" id="type_validator"></span>
                                                    </div>
                                                </div>																			
											</div>
										</form>
									</div>
									<div class="modal-footer align-items-center">
										<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Discard</button>
										<button type="button" class="btn btn-primary"  onclick="add_administration_details()">Create</button>
									</div>
								</div>
							</div>
						</div>
						<!-- /Edit Info -->
						
						<!-- Add Label -->
						<div id="add_new_label" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered modal-sm" role="document">
								<div class="modal-content">
									<div class="modal-body">
										<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">×</span>
										</button>
										<h6 class="text-uppercase fw-bold mb-3">Add Label</h6>
										<form>
											<div class="row gx-3">
												<div class="col-sm-12">
													<div class="form-group">
														<input class="form-control" type="text" placeholder="Label Name"/>
													</div>
												</div>
											</div>
											<button type="button" class="btn btn-primary float-end" data-bs-dismiss="modal">Add</button>
										</form>
									</div>
								</div>
							</div>
						</div>
						<!-- Add Label -->
						
						<!-- Add Tag -->
						<div id="add_new_tag" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered modal-sm" role="document">
								<div class="modal-content">
									<div class="modal-body">
										<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">×</span>
										</button>
										<h6 class="text-uppercase fw-bold mb-3">Add Tag</h6>
										<form>
											<div class="row gx-3">
												<div class="col-sm-12">
													<div class="form-group">
														<select id="input_tags_3" class="form-control" multiple="multiple">
															<option selected="selected">Collaborator</option>
															<option selected="selected">Designer</option>
															<option selected="selected">React Developer</option>
															<option selected="selected">Promotion</option>
															<option selected="selected">Advertisement</option>
														</select>
													</div>
												</div>
											</div>
											<button type="button" class="btn btn-primary float-end" data-bs-dismiss="modal">Add</button>
										</form>
									</div>
								</div>
							</div>
						</div>
						<!-- Add Tag -->
					</div>
				</div>
			</div>
			<!-- /Page Body -->
		</div>
		<!-- /Main Content -->
	</div>
    <!-- /Wrapper -->

	<style type="text/css">
		.border_class {
			border: 1px solid red !important;
		}
	</style>

	<script>
		function add_administration_details() {
			const priestId   = document.getElementById('priest_id').value;
			const priestRole = document.getElementById('priest_role').value;
			const priestType = document.getElementById('priest_type').value;

			if(priestId != "" && priestRole != "" && priestType != ""){
				$.ajax({
					type: 'POST',
					url: "<?php echo site_url('user/add_administration'); ?>",
					data: { 'a_user_id': priestId, 'a_role' : priestRole,  'a_type': priestType },
					dataType: 'json',
					success: function (response) {						
						if (response.error == false) {
							$("#add_new_contact").modal('hide')
						} else {
							
							
						}
					}
      			});
			}
			else{
				if(priestId == ""){
					document.getElementById('priest_id').classList.add('border_class');
					document.getElementById('name_validator').innerHTML = 'Please select Priest name'
				}
				if(priestRole == ""){
					document.getElementById('priest_role').classList.add('border_class');
					document.getElementById('role_validator').innerHTML = 'Priest role is required'
				}
				if(priestType == ""){
					document.getElementById('priest_type').classList.add('border_class');
					document.getElementById('type_validator').innerHTML = 'Priest level is required'

				}
			}			
		}
	
		function deleteAdministrator(id,userid,name) {
			var data = {
				'p_id': id,
				'p_name': name,
				'p_user_id':userid
			};
			$("#delete_administrator").modal('show');
			document.getElementById('delete_name').innerHTML = name;
			$('#delete_administrator_data').on('click', function() {
				deleteUser(data);
			});
		}

		function deleteUser(data) {
			if (data?.p_id != "") {
				$.ajax({
					type: 'POST',
					url: "<?php echo site_url('user/delete_administration_priest'); ?>",
					data: { 'id': data?.p_id, 'a_user_id': data?.p_user_id },
					dataType: 'json',
					success: function (response) {						
						if (response.error == false) {
							$("#delete_administrator").modal('hide')
						} else {
							
							
						}
					}
      			});
			}
		}
		



	</script>
